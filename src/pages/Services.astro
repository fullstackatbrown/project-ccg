---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
import '../styles/global.css';
import { fetchClients } from '../../contentfulClient.js';

const projects = await fetchClients();
---

<Layout>
  <Navbar></Navbar>
 
  <!-- Hero Section -->
  <section id="services-head" class="relative w-full min-h-screen flex items-center justify-center">
    <!-- Background Image -->
    <img id="contentful-image" alt="Contentful Image"
      class="absolute inset-0 w-full h-full object-cover object-center">
    
    <!-- Services Title --> 
    <div class="absolute bottom-8 left-8 text-white">
      <h1 class="text-5xl md:text-7xl font-bold mb-4">Services</h1>
    </div>
  </section>

  <section class="projects flex">
    <!-- Left 2/3: Project Description -->
    <div id="project-description" class="w-2/3 p-8">
      <h3 class="text-4xl md:text-5xl font-bold text-blue-900 pb-12">{projects[0]?.companyName || "Loading..."}</h3>
      <p class="text-gray-700 text-2xl">{projects[0]?.description || "Loading project description..."}</p>
    </div>

    <!-- Right 1/3: Clickable Boxes -->
    <div id="project-boxes" class="w-1/3 p-8">
      <h1 class="text-4xl md:text-5xl font-bold italic text-blue-500 pb-12">PROJECTS</h1>
      {projects.map((project, index) => (
        <div 
          class="project-box flex items-center gap-4 p-4 mb-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-100 transition"
          data-index={index}
        >
          <img src={project.logo} alt={project.companyName} class="w-20 h-20 object-cover">
          <h4 class="text-2xl font-bold">{project.companyName}</h4>
        </div>
      ))}
    </div>
  </section>

	<!-- Annual Report Section -->
	<section class="w-full py-20 bg-white">
		<div class="container mx-auto px-4">
			<div class="max-w-4xl mx-auto text-center mb-12 fade-in">
				<h2 class="text-4xl md:text-5xl font-bold mb-6">Annual Report</h2>
				<div class="flex items-center justify-center mb-8">
					<div class="w-12 h-1 bg-red-700"></div>
					<div class="w-3 h-3 rounded-full bg-red-700 ml-1"></div>
					<div class="w-12 h-1 bg-red-700 ml-1"></div>
				</div>
				<p class="text-xl text-gray-700">
					Discover our achievements, impact, and future directions in our latest annual report.
				</p>
			</div>
			
			<div class="flex flex-col md:flex-row bg-white rounded-lg shadow-xl overflow-hidden fade-in fade-in-delay-1">
				<div class="w-full md:w-1/2">
					<img src="/src/assets/images/annualreport.png" alt="Annual Report" class="w-full max-w-sm h-auto object-cover mx-auto">
				</div>
				<div class="w-full md:w-1/2 p-8 md:p-12 flex flex-col justify-center">
					<h3 class="text-2xl md:text-3xl font-bold mb-4">2024 Annual Report</h3>
					<p class="text-lg text-gray-800 mb-6">
						Our latest annual report showcases our major accomplishments, financial health, and strategic plans for the future. Learn about our impact metrics, community initiatives, and sustainable practices.
					</p>
					<ul class="space-y-3 mb-8">
						<li class="flex items-start">
							<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-700 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
							</svg>
							<span>Financial highlights and growth metrics</span>
						</li>
						<li class="flex items-start">
							<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-700 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
							</svg>
							<span>Client success stories and testimonials</span>
						</li>
						<li class="flex items-start">
							<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-700 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
							</svg>
							<span>Strategic initiatives and future outlook</span>
						</li>
					</ul>
					<div>
						<a href="https://drive.google.com/file/d/1Aw0RdZ979MUWXhvcyrbGLgLnC4-39ftT/view" target="_blank" class="inline-flex items-center px-8 py-3 bg-red-700 text-white font-medium rounded-full hover:bg-red-800 transition-colors shadow-md">
							Read the Report
							<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
								<path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
							</svg>
						</a>
					</div>
				</div>
			</div>
		</div>
	</section>

  <Footer></Footer>
</Layout>

<script type="module">
  import { fetchClients } from '../../contentfulClient.js';


  document.addEventListener("DOMContentLoaded", async function() {
    const projects = await fetchClients();

    // Function to update the project description
    function updateProject(index) {
      const projectDescription = document.getElementById("project-description");
      if (projects[index]) {
        projectDescription.innerHTML = `
          <h3 class="text-4xl md:text-5xl font-bold text-blue-900 pb-12">${projects[index].companyName}</h3>
          <p class="text-gray-700 text-2xl">${projects[index].description}</p>
        `;
      }
    }

    // Add event listeners to the clickable boxes
    const projectBoxes = document.querySelectorAll(".project-box");
    projectBoxes.forEach((box) => {
      box.addEventListener("click", () => {
        const index = box.getAttribute("data-index");
        updateProject(index);
      });
    });
  });
</script>
