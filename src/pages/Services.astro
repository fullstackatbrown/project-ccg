---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
import '../styles/global.css';
import { fetchClients } from '../../contentfulClient.js';

const projects = await fetchClients();
---

<Layout>
  <Navbar></Navbar>
 
  <!-- Hero Section -->
  <section id="services-head" class="relative w-full h-[60vh] flex items-center justify-center overflow-hidden rounded-b-4xl fade-in">
    <!-- Background Image -->
    <img id="contentful-image" alt="Contentful Image"
				class="relative min-w-full h-full object-cover object-center md:object-[50%_20%] scale-100 md:scale-110 lg:scale-100 transition-all duration-500 fade-in-delay-1"
    >    

  	<!-- Dark Overlay (same size as section) -->
			<div class="absolute w-full h-full bg-black opacity-40 fade-in-delay-2"></div>

    <!-- Services Title --> 
		<div class="absolute bottom-4 left-4 text-white text-9xl font-bold fade-in-delay-3" style="font-family: 'Almarai', sans-serif;">
      <h1 class="text-5xl md:text-7xl font-bold mb-4">Services</h1>
    </div>
  </section>

  <!-- Our Values Section -->
  <section class="w-full py-16 bg-gray-100 fade-in">
    <div class="container mx-auto fade-in-delay-1">
      <h1 class="text-5xl md:text-7xl font-bold mb-8 flex justify-center item-center">Our Values</h1>
        <div class="flex items-center justify-center mb-8 mt-4 fade-in-delay-3">
        <div class="w-12 h-1 bg-red-700"></div>
        <div class="w-3 h-3 rounded-full bg-red-700 ml-1"></div>
        <div class="w-12 h-1 bg-red-700 ml-1"></div>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-5 gap-8 text-center fade-in-delay-2">
        <div class="fade-in-delay-3">
          <h3 class="text-xl font-bold mb-2">Excellence & Dedication</h3>
          <p class="text-gray-700">CCG attracts Brown’s top student talent, selecting about 8% of applicants through a rigorous recruitment process. Our members undergo structured training and hands-on experience, ensuring we uphold the highest standards in every engagement. Many of our alumni go on to top consulting firms, Fortune 500 companies, and leading graduate programs.
</p>
        </div>
        <div class="fade-in-delay-3">
          <h3 class="text-xl font-bold mb-2">Tangible Impact</h3>
          <p class="text-gray-700">Each project team dedicates over 400 hours across a 10-week engagement, conducting in-depth research and strategic analysis to drive meaningful results. Our clients consistently report valuable insights and actionable recommendations, with many returning for future partnerships.
</p>
        </div>
        <div class="fade-in-delay-3">
          <h3 class="text-xl font-bold mb-2">Tailored Solutions</h3>
          <p class="text-gray-700">We don’t believe in one-size-fits-all strategies. Our teams work closely with each client to define project objectives and adapt dynamically as new opportunities emerge. By leveraging structured problem-solving and creative thinking, we deliver solutions that align with each company’s unique goals and challenges.
</p>
        </div>
        <div class="fade-in-delay-3">
          <h3 class="text-xl font-bold mb-2">Unparalleled Resources</h3>
          <p class="text-gray-700">CCG provides access to a network of highly motivated students, industry research, and faculty insights. Our teams use advanced analytical tools, proprietary data sources, and structured methodologies to uncover key business insights and drive strategic decision-making.
</p>
        </div>
        <div class="fade-in-delay-3">
          <h3 class="text-xl font-bold mb-2">Collaborative & Diverse Teams</h3>
          <p class="text-gray-700">CCG teams bring together students from diverse academic and personal backgrounds, equipping each engagement with a well-rounded perspective. A typical team consists of 4-6 Consultants led by 1-2 Project Leads, ensuring a balance of strategic oversight and hands-on execution. Our members receive specialized training and continuous mentorship, refining their problem-solving, communication, and analytical skills throughout the engagement.
</p>
        </div>
      </div>
    </div>
  </section>

  <section class="projects flex fade-in">
    <!-- Left 2/3: Project Description -->
    <div id="project-description" class="w-2/3 p-8 flex flex-col items-center text-center relative bg-blue-50 rounded-3xl fade-in-delay-1" style="margin-top: 50px;">
      <div class="flex items-center justify-center w-full fade-in-delay-2">
        <img src={projects[0]?.logo} id="project-logo" class="w-32 h-32 object-cover rounded-lg mr-8" alt="Project Logo" />
        <h3 class="text-4xl md:text-5xl font-bold text-blue-900">{projects[0]?.companyName || "Loading..."}</h3>
      </div>
      <div class="flex items-center justify-center mb-8 mt-4 fade-in-delay-3">
        <div class="w-12 h-1 bg-red-700"></div>
        <div class="w-3 h-3 rounded-full bg-red-700 ml-1"></div>
        <div class="w-12 h-1 bg-red-700 ml-1"></div>
      </div>
      <p class="text-gray-700 text-2xl w-3/4 text-left fade-in-delay-3">{projects[0]?.description || "Loading project description..."}</p>
    </div>

    <!-- Right 1/3: Clickable Boxes -->
    <div id="project-boxes" class="w-1/3 p-8 fade-in-delay-2" style="margin-top: 30px;">
      <h1 class="text-4xl md:text-5xl font-bold italic text-blue-500 flex pb-8 fade-in-delay-3">PROJECTS</h1>
      {projects.map((project, index) => (
        <div 
          class="project-box flex items-center gap-4 p-4 mb-4 border border-gray-300 cursor-pointer transition overflow-hidden bg-blue-50 text-blue-900 fade-in-delay-3"
          data-index={index}
          style="margin-right: -50px; border-radius: 40px;"> 
          <img src={project.logo} alt={project.companyName} class="w-20 h-20 object-cover rounded-3xl">
          <h4 class="text-2xl font-bold">{project.companyName}</h4>
        </div>
      ))}
    </div>
  </section>

	<!-- Annual Report Section -->
	<section class="w-full py-20 bg-white">
		<div class="container mx-auto px-4">
			<div class="max-w-4xl mx-auto text-center mb-12 fade-in">
				<h2 class="text-4xl md:text-5xl font-bold mb-6">Annual Report</h2>
				<div class="flex items-center justify-center mb-8">
					<div class="w-12 h-1 bg-red-700"></div>
					<div class="w-3 h-3 rounded-full bg-red-700 ml-1"></div>
					<div class="w-12 h-1 bg-red-700 ml-1"></div>
				</div>
				<p class="text-xl text-gray-700">
					Discover our achievements, impact, and future directions in our latest annual report.
				</p>
			</div>
			
			<div class="flex flex-col md:flex-row bg-white rounded-lg shadow-xl overflow-hidden fade-in fade-in-delay-1">
				<div class="w-full md:w-1/2">
					<img src="/src/assets/images/annualreport.png" alt="Annual Report" class="w-full max-w-sm h-auto object-cover mx-auto">
				</div>
				<div class="w-full md:w-1/2 p-8 md:p-12 flex flex-col justify-center">
					<h3 class="text-2xl md:text-3xl font-bold mb-4">2024 Annual Report</h3>
					<p class="text-lg text-gray-800 mb-6">
						Our latest annual report showcases our major accomplishments, financial health, and strategic plans for the future. Learn about our impact metrics, community initiatives, and sustainable practices.
					</p>
					<ul class="space-y-3 mb-8">
						<li class="flex items-start">
							<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-700 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
							</svg>
							<span>Financial highlights and growth metrics</span>
						</li>
						<li class="flex items-start">
							<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-700 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
							</svg>
							<span>Client success stories and testimonials</span>
						</li>
						<li class="flex items-start">
							<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-700 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
							</svg>
							<span>Strategic initiatives and future outlook</span>
						</li>
					</ul>
					<div>
						<a href="https://drive.google.com/file/d/1Aw0RdZ979MUWXhvcyrbGLgLnC4-39ftT/view" target="_blank" class="inline-flex items-center px-8 py-3 bg-red-700 text-white font-medium rounded-full hover:bg-red-800 transition-colors shadow-md">
							Read the Report
							<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
								<path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
							</svg>
						</a>
					</div>
				</div>
			</div>
		</div>
	</section>

  <Footer></Footer>
</Layout>

<script type="module">
  import { fetchClients } from '../../contentfulClient.js';

  document.addEventListener("DOMContentLoaded", async function() {
    const projects = await fetchClients();
    let activeBox = null; // Track the currently active box

    // Function to update the project description
    function updateProject(index) {
      const projectDescription = document.getElementById("project-description");
      const projectLogo = document.getElementById("project-logo");

      if (projects[index]) {
        projectLogo.src = projects[index].logo || "";
        projectLogo.alt = projects[index].companyName || "Project Logo";
        projectDescription.innerHTML = `
          <div class="flex items-center justify-center w-full fade-in-delay-2">
            <img id="project-logo" class="w-32 h-32 object-cover rounded-lg mr-8" alt="${projects[index].companyName}" src="${projects[index].logo || ''}" />
            <h3 class="text-4xl md:text-5xl font-bold text-blue-900">${projects[index].companyName}</h3>
          </div>
          <div class="flex items-center justify-center mb-8 mt-4 fade-in-delay-3">
            <div class="w-12 h-1 bg-red-700"></div>
            <div class="w-3 h-3 rounded-full bg-red-700 ml-1"></div>
            <div class="w-12 h-1 bg-red-700 ml-1"></div>
          </div>
          <p class="text-gray-700 text-2xl w-3/4 text-left fade-in-delay-3">${projects[index].description}</p>
        `;
      }
    }

    // Add event listeners to the clickable boxes
    const projectBoxes = document.querySelectorAll(".project-box");
    projectBoxes.forEach((box) => {
      box.addEventListener("click", () => {
        const index = box.getAttribute("data-index");

        // Revert the previously active box to normal
        if (activeBox) {
          activeBox.classList.remove("bg-red-700", "text-white", "hover:bg-red-300");
          activeBox.classList.add("bg-blue-50", "text-blue-900", "hover:bg-gray-100");
        }

        // Set the clicked box as active
        box.classList.remove("bg-blue-50", "text-blue-900", "hover:bg-gray-100");
        box.classList.add("bg-red-700", "text-white", "hover:bg-red-300");
        activeBox = box;

        // Update the project description
        updateProject(index);
      });
    });
  });
</script>
